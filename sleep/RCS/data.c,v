head	1.8;
access;
symbols
	DSLEEPv0_98:1.8
	DSLEEPv0_95:1.4
	DSLEEPv0_93:1.4
	DSLEEPv0_92:1.4
	DSLEEPv0_91:1.3
	DSLEEPv0_80:1.2
	DSLEEPv0_70:1.2
	DSLEEPv0_60:1.1;
locks; strict;
comment	@ * @;


1.8
date	2001.02.27.02.27.56;	author vitus;	state Exp;
branches;
next	1.7;

1.7
date	99.11.29.00.40.33;	author vitus;	state Exp;
branches;
next	1.6;

1.6
date	98.06.28.23.54.41;	author vitus;	state Exp;
branches;
next	1.5;

1.5
date	97.12.05.01.45.48;	author vitus;	state Exp;
branches;
next	1.4;

1.4
date	97.09.03.01.16.44;	author vitus;	state Exp;
branches;
next	1.3;

1.3
date	97.03.03.01.17.09;	author vitus;	state Exp;
branches;
next	1.2;

1.2
date	96.11.04.00.04.17;	author vitus;	state Exp;
branches;
next	1.1;

1.1
date	96.09.26.01.37.41;	author vitus;	state Exp;
branches;
next	;


desc
@Defines all external data objects
@


1.8
log
@- added fAPMSuspended, non-zero when the machine is suspended
@
text
@/*
 * $Source: R:/source/driver/sleep/RCS/data.c,v $
 * $Revision: 1.7 $
 * $Date: 1999/11/29 00:40:33 $
 * $Locker: vitus $
 *
 * Declares all data used in this driver.  This should be
 * done in a seperate source file to have greater control
 * on segment/data allocation.
 *
 * History:
 * $Log: data.c,v $
 * Revision 1.7  1999/11/29 00:40:33  vitus
 * - moved all system includes to dsksleep.h
 *
 * Revision 1.6  1998/06/28 23:54:41  vitus
 * - removed addcalls.h (not needed, WatCom probs)
 *
 * Revision 1.5  1997/12/05 01:45:48  vitus
 * - added WatCom specific code and header
 * - moved history to bottom of file
 *
 * Revision 1.4  1997/09/03 01:16:44  vitus
 * Included scsi.h (structures now contain SCSI status)
 *
 * Revision 1.3  1997/03/03 01:17:09  vitus
 * Moved message buffer data to resident area
 *
 * Revision 1.2  1996/11/04 00:04:17  vitus
 * Removed global timeout value
 *
 * Revision 1.1  1996/09/26 01:37:41  vitus
 * Initial revision
 * ------------------------------------------------
 * This code is Copyright Vitus Jensen 1996-99,2001
 */
static char id[]="$Id: data.c,v 1.7 1999/11/29 00:40:33 vitus Exp vitus $";

#define INCL_NOBASEAPI
#define INCL_NOPMAPI
#define INCL_INITRP_ONLY
#include "dsksleep.h"
#include "proto.h"
#include "extern.h"



/*
 * Static Data
 */

PFN		Device_Help =	0;
struct InfoSegGDT FAR	*pGlobalInfoSeg = 0;

USHORT		fDriverFlags =	0;
UCHAR		fAPMSuspended = 0;
char		szDriverName[]= "DSLEEPS$";
USHORT		hdThisDriver =	0;

ULONG		ulTimer =	0;		/* free running timer */


/*
 * Configuration data.  A structure
 * for every filtered device.
 */

NPDEVICE	anpUnit[MAX_UNITS] = {0};
USHORT		cUnit =		0;		/* entries in above table */


/*
 * Message generated by this driver.  May
 * be discarded after INIT.
 */
#define MSG_REPLACEMENT_STRING	1178		/* %1 %2 %3 ... */

UCHAR	szMsgBuffer[1024]		= {0};

MSGTABLE msgBuffer = {
    MSG_REPLACEMENT_STRING, 1, (PBYTE)szMsgBuffer 
};


/*
 * Initialization Data
 */

UCHAR	MemPool[30*1024] =	{0};
NPUCHAR	npInitData =		MemPool;
BYTE    DeviceTable[MAX_DEVICETABLE_SIZE] = {0};
@


1.7
log
@- moved all system includes to dsksleep.h
@
text
@d2 4
a5 4
 * $Source: r:/source/driver/sleep/RCS/data.c,v $
 * $Revision: 1.6 $
 * $Date: 1998/06/28 23:54:41 $
 * $Locker$
d13 3
d34 2
a35 2
 * -------------------------------------------
 * This code is Copyright Vitus Jensen 1996-99
d37 1
a37 1
static char id[]="$Id: data.c,v 1.6 1998/06/28 23:54:41 vitus Exp vitus $";
d56 1
@


1.6
log
@- removed addcalls.h (not needed, WatCom probs)
@
text
@d3 3
a5 3
 * $Revision: 1.5 $
 * $Date: 1997/12/05 01:45:48 $
 * $Author: vitus $
d13 3
d31 2
a32 2
 * ----------------------------------------
 * This code is Copyright Vitus Jensen 1996
d34 1
a34 4
#pragma off (unreferenced)
static char id[]="$Id: data.c,v 1.5 1997/12/05 01:45:48 vitus Exp vitus $";
#pragma on (unreferenced)

a37 4
#include <os2.h>

#include <devcmd.h>

a38 15
#include <reqpkt.h>

#include <scb.h>
#include <abios.h>

#include <scsi.h>
#include <iorb.h>
#if defined(__WATCOMC__)
# include <devhelp.h>
typedef USHORT NEAR *NPUSHORT;
typedef VOID   NEAR *NPVOID;
#else
# include <dhcalls.h>
#endif

a87 1

@


1.5
log
@- added WatCom specific code and header
- moved history to bottom of file
@
text
@d2 3
a4 3
 * $Source: e:/source/driver/sleep/RCS/data.c,v $
 * $Revision: 1.4 $
 * $Date: 1997/09/03 01:16:44 $
d11 17
a27 1
 * History: see bottom of file
d32 1
a32 1
static char id[]="$Id: data.c,v 1.4 1997/09/03 01:16:44 vitus Exp vitus $";
a49 1
#include <addcalls.h>
a107 17


/* History: see bottom of file
 *
 * $Log: data.c,v $
 * Revision 1.4  1997/09/03 01:16:44  vitus
 * Included scsi.h (structures now contain SCSI status)
 *
 * Revision 1.3  1997/03/03 01:17:09  vitus
 * Moved message buffer data to resident area
 *
 * Revision 1.2  1996/11/04 00:04:17  vitus
 * Removed global timeout value
 *
 * Revision 1.1  1996/09/26 01:37:41  vitus
 * Initial revision
 */
@


1.4
log
@Included scsi.h (structures now contain SCSI status)
@
text
@d3 2
a4 2
 * $Revision: 1.3 $
 * $Date: 1997/03/03 01:17:09 $
d7 3
a9 1
 * Declares all data used in this driver.
d11 1
a11 9
 * $Log: data.c,v $
 * Revision 1.3  1997/03/03 01:17:09  vitus
 * Moved message buffer data to resident area
 *
 * Revision 1.2  1996/11/04 00:04:17  vitus
 * Removed global timeout value
 *
 * Revision 1.1  1996/09/26 01:37:41  vitus
 * Initial revision
d15 3
a17 1
static char vcid[]="$Id: data.c,v 1.3 1997/03/03 01:17:09 vitus Exp vitus $";
d35 7
a41 2

#include <dhcalls.h>
d92 18
@


1.3
log
@Moved message buffer data to resident area
@
text
@d3 2
a4 2
 * $Revision: 1.2 $
 * $Date: 1996/11/04 00:04:17 $
d10 3
a17 1
 *
d21 1
a21 1
static char vcid[]="$Id: data.c,v 1.2 1996/11/04 00:04:17 vitus Exp vitus $";
d36 1
@


1.2
log
@Removed global timeout value
@
text
@d3 2
a4 2
 * $Revision: 1.1 $
 * $Date: 1996/09/26 01:37:41 $
d10 3
d19 1
a19 1
static char vcid[]="$Id: data.c,v 1.1 1996/09/26 01:37:41 vitus Exp vitus $";
a68 10
 * Initialization Data
 */

UCHAR	MemPool[30*1024] =	{0};
NPUCHAR	npInitData =		MemPool;
BYTE    DeviceTable[MAX_DEVICETABLE_SIZE] = {0};



/*
d80 8
@


1.1
log
@Initial revision
@
text
@d2 4
a5 4
 * $Source$
 * $Revision$
 * $Date$
 * $Author$
d9 4
a12 1
 * $Log$
d16 1
a16 1
static char vcid[]="$Id$";
a53 1
USHORT		usSleepSeconds = SLEEP_TIME;	/* modified by IOCtl */
@
